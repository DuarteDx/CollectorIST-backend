const handler = ({persistentTaskProvider}) => {
  return async (request, h) => {
    const tasks = await persistentTaskProvider.getTasks()
    return { tasks: tasks }
  }
}

const config = ({roles, twoFactor}) => {
  return {
    description: 'Get tasks defined',
    plugins: {
      'porg-auth': {
        type: 'user-session',
        twoFactor,
        roles
      }
    }
  }
}

export default { handler, config }
