import { mapper } from '@/schemas'
import Joi from 'joi'

const schema = Joi.object().keys({
  id: Joi.string().required(),
  nonce: Joi.string().length(4),
  challenges: Joi.array().items(Joi.object({
    start: Joi.number().min(0).integer(),
    end: Joi.number().min(0).integer(),
    id: Joi.string()
  })).optional()
}).rename('_id', 'id')

const UploadSession = (payload) => {
  return mapper(schema, payload)
}

export { UploadSession, schema as UploadSessionSchema }
