const handler = ({ samlOptions }) => {
  return async (request, h) => {
    return h.response(samlOptions.sp.create_metadata()).type('text/xml')
  }
}

const config = {
  description: 'Returns the SAML metadata',
  cache: {
    privacy: 'private',
    expiresIn: 0
  },
  plugins: {
    'porg-auth': {
      type: 'no-auth'
    }
  }
}

export default { handler, config }
