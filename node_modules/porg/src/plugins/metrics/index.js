import Prometheus from 'prom-client'

let clientProm = Prometheus

const plugin = {
  name: 'metrics-plugin',
  version: '1.0.0',
  register: function (server, options) {
    if (options.enabled) {
      if (options.collectDefaultMetrics) {
        // Prometheus.collectDefaultMetrics()
      }
      // server.route({
      //   path: '/',
      //   method: 'GET',
      //   handler: (request, h) => {
      //     return h.response(Prometheus.register.metrics())
      //       .header('Content-Type', Prometheus.register.contentType)
      //   },
      //   config: {
      //     description: 'Exposes metrics to Prometheus'
      //   }
      // })
    }
  }
}

export {
  plugin,
  clientProm
}
