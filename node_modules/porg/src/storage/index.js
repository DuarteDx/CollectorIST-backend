import { getStorageProvider } from '@/providers'
import { kebabToCamel } from '@/utils'
let storages = {}

const storageSetup = ({ storageConfig }) => {
  for (const key of Object.keys(storageConfig)) {
    storages[key] = getStorageProvider({ name: storageConfig[key].provider, rootPath: storageConfig[key].rootPath })
  }
}

const Storage = {
  // Receives the storage name as it is written on porg.yml
  get: ({ name }) => {
    return storages[kebabToCamel({ value: name })]
  }
}

export default {
  storageSetup,
  Storage
}
