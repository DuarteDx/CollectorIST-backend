version: '3.1'
services:
  mongo:
    image: mongo:4
    environment:
      - MONGO_INITDB_ROOT_USERNAME=root
      - MONGO_INITDB_ROOT_PASSWORD=root
      - MONGO_USERNAME=porg
      - MONGO_PASSWORD=porg
      - MONGO_DATABASE=porg
    volumes:
      - "$PWD/entrypoint.sh:/docker-entrypoint-initdb.d/entrypoint.sh"
    ports:
      - 127.0.0.1:27017:27017
  consul:
    image: consul:1.0.6
    environment:
     - 'CONSUL_LOCAL_CONFIG={"acl_master_token": "changeme"}'
    ports:
     - 127.0.0.1:8500:8500
    command: ["agent", "-enable-script-checks", "-dev", "-client", "0.0.0.0"]
  cas:
    build:
     context: .
     dockerfile: Dockerfile.cas
    ports:
      - 8443:8443
  fakesmtp:
    image: gessnerfl/fake-smtp-server
    ports:
      - 5025:5025
      - 5080:5080
  # s3:
  #   image: scality/s3server:mem-latest
  #   ports: 
  #     - 9444:8000
  #   environment:
  #     - SCALITY_ACCESS_KEY_ID=porgaccesskey
  #     - SCALITY_SECRET_ACCESS_KEY=porgsuperpassword


     

